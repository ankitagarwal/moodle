YUI.add("moodle-report_eventlist-eventfilter",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}var r={EVENTNAME:"#id_eventname",EVENTCOMPONENT:"#id_eventcomponent",EVENTEDULEVEL:"#id_eventedulevel",EVENTCRUD:"#id_eventcrud",FILTERBUTTON:"#id_filterbutton",CLEARBUTTON:"#id_clearbutton"};e.extend(n,e.Base,{_table:null,_eventName:null,_component:null,_eduLevel:null,_crud:null,initializer:function(){var t=e.one(r.FILTERBUTTON),n=e.one(r.CLEARBUTTON);this._createTable(this.get("tabledata")),this._eventName=e.one(r.EVENTNAME),this._component=e.one(r.EVENTCOMPONENT),this._eduLevel=e.one(r.EVENTEDULEVEL),this._crud=e.one(r.EVENTCRUD),this._eventName.on("valuechange",this._totalFilter,this),t.on("click",this._totalFilter,this),n.on("click",this._clearFilter,this)},_createTable:function(t){var n=new e.DataTable({columns:[{key:"fulleventname",label:M.util.get_string("eventname","report_eventlist"),allowHTML:!0,sortable:!0},{key:"component",label:M.util.get_string("component","report_eventlist"),sortable:!0},{key:"edulevel",label:M.util.get_string("edulevel","report_eventlist"),sortable:!0},{key:"crud",label:M.util.get_string("crud","report_eventlist"),sortable:!0},{key:"action",label:M.util.get_string("action","report_eventlist"),sortable:!0},{key:"objecttable",label:M.util.get_string("objecttable","report_eventlist"),sortable:!0},{key:"devdetail",label:M.util.get_string("devdetail","report_eventlist"),allowHTML:!0,sortable:!1}],data:t});return n.render("#path-admin-tool-eventlist-table"),n.get("boundingBox").addClass("path-admin-tool-eventlist-datatable-table"),this._table=n,this},_totalFilter:function(){var e=this._eventName.get("value").toLowerCase(),t=this._component.get("options").item(this._component.get("selectedIndex")).get("text").toLowerCase(),n=this._component.get("value"),r=this._eduLevel.get("options").item(this._eduLevel.get("selectedIndex")).get("text").toLowerCase(),i=this._eduLevel.get("value"),s=this._crud.get("options").item(this._crud.get("selectedIndex")).get("text").toLowerCase(),o=this._crud.get("value"),u,a=[];for(u=0;u<this.get("tabledata").length;u++){var f=this.get("tabledata")[u].fulleventname.toLowerCase().indexOf(e)>=0,l=this.get("tabledata")[u].component.toLowerCase().indexOf(t)>=0,c=this.get("tabledata")[u].edulevel.toLowerCase().indexOf(r)>=0,h=this.get("tabledata")[u].crud.toLowerCase().indexOf(s)>=0;e===""&&(f=!0),n==="0"&&(l=!0),i==="0"&&(c=!0),o==="0"&&(h=!0),f&&l&&c&&h&&a.push(this.get("tabledata")[u])}this._table.set("data",a)},_clearFilter:function(){this._eventName.set("value",""),this._component.set("value","0"),this._eduLevel.set("value","0"),this._crud.set("value","0"),this._table.set("data",this.get("tabledata"))}},{NAME:"eventFilter",ATTRS:{tabledata:{value:null}}}),e.namespace("M.report_eventlist.EventFilter").init=function(e){return new n(e)}},"@VERSION@",{requires:["base","event","node","node-event-delegate","datatable"]});
